{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\prave\\\\Projects\\\\CreditCardSystem-UI\\\\src\\\\CreditCardApp.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport $ from 'jquery-ajax';\nimport \"./creditcardapp.css\";\nimport Form from './components/AddNewCreditCards';\nimport CardList from './components/CardList';\nimport ValidationErrors from './hooks/ValidationErrors';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst urlGetAll = \"http://localhost:8080/creditCard/getAll\";\nconst urlAdd = \"http://localhost:8080/creditCard/add\";\n\nfunction App() {\n  _s();\n\n  const [card, setCard] = useState({\n    name: '',\n    cardNumber: '',\n    limit: 0\n  });\n  const [validationErrors, setValidationErrors] = useState({\n    name: false,\n    cardNumber: false,\n    limit: false\n  });\n  const [cardList, setCardList] = useState([]);\n  useEffect(() => {\n    $.get(urlGetAll, response => setCardList(response));\n  }, []);\n\n  const handleInputChange = event => {\n    let obj = {\n      [event.target.name]: event.target.value\n    };\n    setCard(() => ({ ...card,\n      ...obj\n    }));\n  };\n\n  const isFormValid = () => {\n    const nameRegex = /^[^0-9.]+$/;\n    const limitRegex = /^[0-9]+$/;\n    let errors = {\n      name: true,\n      cardNumber: true,\n      limit: true\n    };\n    if (nameRegex.test(card.name)) errors.name = false;\n    if (checkCardNumber()) errors.cardNumber = false;\n    if (limitRegex.test(card.limit) && card.limit >= 100) errors.limit = false;\n    setValidationErrors(errors);\n    return !Object.values(errors).some(error => error === true);\n  };\n\n  const checkCardNumber = () => {\n    const cardNumber = card.cardNumber.replace(/ /g, '').replace(/-/g, '');\n    return cardNumber.length >= 16 && cardNumber.length <= 19 && checkLuhn10(cardNumber);\n  };\n\n  const checkLuhn10 = cardNumber => {\n    let sum = 0;\n\n    for (let i = 0; i < cardNumber.length; i++) {\n      let digit = Number(cardNumber.charAt(i));\n\n      if (i % 2 === 0) {\n        digit *= 2;\n        if (digit > 9) digit -= 9;\n      }\n\n      sum += digit;\n    }\n\n    return sum % 10 === 0;\n  };\n\n  const addCard = () => {\n    if (isFormValid()) {\n      $.ajax({\n        url: urlAdd,\n        type: \"POST\",\n        data: JSON.stringify(card),\n        contentType: \"application/json;charset=utf-8\",\n        success: function (r) {\n          setCardList([...cardList, card]);\n          setCard({\n            name: '',\n            cardNumber: '',\n            limit: ''\n          });\n        },\n        error: function (xhr, status, error) {\n          if (xhr.status === 409) {\n            alert(\"A Credit Card with that number already exists!\");\n          } else {\n            alert(\"A service error occurred, please try again later!\");\n          }\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Credit Card System\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \" Add \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      card: card,\n      handleInputChange: handleInputChange,\n      addCard: addCard\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ValidationErrors, {\n      errors: validationErrors\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CardList, {\n      cards: cardList\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 9\n  }, this);\n}\n\n_s(App, \"aIELwUHcuvLXxdSj5DkjBnEUPUQ=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/prave/Projects/CreditCardSystem-UI/src/CreditCardApp.js"],"names":["React","useState","useEffect","$","Form","CardList","ValidationErrors","urlGetAll","urlAdd","App","card","setCard","name","cardNumber","limit","validationErrors","setValidationErrors","cardList","setCardList","get","response","handleInputChange","event","obj","target","value","isFormValid","nameRegex","limitRegex","errors","test","checkCardNumber","Object","values","some","error","replace","length","checkLuhn10","sum","i","digit","Number","charAt","addCard","ajax","url","type","data","JSON","stringify","contentType","success","r","xhr","status","alert"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,CAAP,MAAc,aAAd;AACA,OAAO,qBAAP;AACA,OAAOC,IAAP,MAAiB,gCAAjB;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,gBAAP,MAA6B,0BAA7B;;AAEA,MAAMC,SAAS,GAAG,yCAAlB;AACA,MAAMC,MAAM,GAAG,sCAAf;;AAGA,SAASC,GAAT,GAAe;AAAA;;AACX,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC;AAC7BW,IAAAA,IAAI,EAAE,EADuB;AACnBC,IAAAA,UAAU,EAAE,EADO;AACHC,IAAAA,KAAK,EAAE;AADJ,GAAD,CAAhC;AAGA,QAAM,CAACC,gBAAD,EAAmBC,mBAAnB,IAA0Cf,QAAQ,CAAC;AACrDW,IAAAA,IAAI,EAAE,KAD+C;AACxCC,IAAAA,UAAU,EAAE,KAD4B;AACrBC,IAAAA,KAAK,EAAE;AADc,GAAD,CAAxD;AAGA,QAAM,CAACG,QAAD,EAAWC,WAAX,IAA0BjB,QAAQ,CAAC,EAAD,CAAxC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZC,IAAAA,CAAC,CAACgB,GAAF,CAAMZ,SAAN,EAAiBa,QAAQ,IAAIF,WAAW,CAACE,QAAD,CAAxC;AACH,GAFQ,EAEN,EAFM,CAAT;;AAKA,QAAMC,iBAAiB,GAAGC,KAAK,IAAI;AAC/B,QAAIC,GAAG,GAAG;AAAC,OAACD,KAAK,CAACE,MAAN,CAAaZ,IAAd,GAAsBU,KAAK,CAACE,MAAN,CAAaC;AAApC,KAAV;AACAd,IAAAA,OAAO,CAAC,OAAO,EAAE,GAAGD,IAAL;AAAW,SAAGa;AAAd,KAAP,CAAD,CAAP;AACH,GAHD;;AAKA,QAAMG,WAAW,GAAG,MAAM;AACtB,UAAMC,SAAS,GAAG,YAAlB;AACA,UAAMC,UAAU,GAAG,UAAnB;AACA,QAAIC,MAAM,GAAG;AAACjB,MAAAA,IAAI,EAAE,IAAP;AAAaC,MAAAA,UAAU,EAAE,IAAzB;AAA+BC,MAAAA,KAAK,EAAE;AAAtC,KAAb;AACA,QAAIa,SAAS,CAACG,IAAV,CAAepB,IAAI,CAACE,IAApB,CAAJ,EACIiB,MAAM,CAACjB,IAAP,GAAc,KAAd;AACJ,QAAImB,eAAe,EAAnB,EACIF,MAAM,CAAChB,UAAP,GAAoB,KAApB;AACJ,QAAIe,UAAU,CAACE,IAAX,CAAgBpB,IAAI,CAACI,KAArB,KAA+BJ,IAAI,CAACI,KAAL,IAAc,GAAjD,EACIe,MAAM,CAACf,KAAP,GAAe,KAAf;AACJE,IAAAA,mBAAmB,CAACa,MAAD,CAAnB;AACA,WAAO,CAACG,MAAM,CAACC,MAAP,CAAcJ,MAAd,EAAsBK,IAAtB,CAA2BC,KAAK,IAAIA,KAAK,KAAK,IAA9C,CAAR;AACH,GAZD;;AAcA,QAAMJ,eAAe,GAAG,MAAM;AAC1B,UAAMlB,UAAU,GAAGH,IAAI,CAACG,UAAL,CAAgBuB,OAAhB,CAAwB,IAAxB,EAA6B,EAA7B,EAAiCA,OAAjC,CAAyC,IAAzC,EAA8C,EAA9C,CAAnB;AACA,WAAOvB,UAAU,CAACwB,MAAX,IAAqB,EAArB,IAA2BxB,UAAU,CAACwB,MAAX,IAAqB,EAAhD,IACAC,WAAW,CAACzB,UAAD,CADlB;AAEH,GAJD;;AAMA,QAAMyB,WAAW,GAAGzB,UAAU,IAAI;AAC9B,QAAI0B,GAAG,GAAG,CAAV;;AACA,SAAK,IAAIC,CAAC,GAAC,CAAX,EAAcA,CAAC,GAAC3B,UAAU,CAACwB,MAA3B,EAAmCG,CAAC,EAApC,EAAuC;AACnC,UAAIC,KAAK,GAAGC,MAAM,CAAC7B,UAAU,CAAC8B,MAAX,CAAkBH,CAAlB,CAAD,CAAlB;;AACA,UAAIA,CAAC,GAAG,CAAJ,KAAU,CAAd,EAAiB;AACbC,QAAAA,KAAK,IAAI,CAAT;AACA,YAAIA,KAAK,GAAG,CAAZ,EACIA,KAAK,IAAI,CAAT;AACP;;AACDF,MAAAA,GAAG,IAAIE,KAAP;AACH;;AACD,WAAQF,GAAG,GAAG,EAAP,KAAe,CAAtB;AACH,GAZD;;AAcA,QAAMK,OAAO,GAAG,MAAM;AAClB,QAAIlB,WAAW,EAAf,EAAkB;AACdvB,MAAAA,CAAC,CAAC0C,IAAF,CAAO;AACHC,QAAAA,GAAG,EAACtC,MADD;AAEHuC,QAAAA,IAAI,EAAC,MAFF;AAGHC,QAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAexC,IAAf,CAHF;AAIHyC,QAAAA,WAAW,EAAC,gCAJT;AAKHC,QAAAA,OAAO,EAAE,UAASC,CAAT,EAAW;AAChBnC,UAAAA,WAAW,CAAE,CAAC,GAAGD,QAAJ,EAAcP,IAAd,CAAF,CAAX;AACAC,UAAAA,OAAO,CAAC;AAACC,YAAAA,IAAI,EAAE,EAAP;AAAWC,YAAAA,UAAU,EAAE,EAAvB;AAA2BC,YAAAA,KAAK,EAAE;AAAlC,WAAD,CAAP;AACH,SARE;AASHqB,QAAAA,KAAK,EAAE,UAASmB,GAAT,EAAcC,MAAd,EAAsBpB,KAAtB,EAA4B;AAC/B,cAAImB,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACpBC,YAAAA,KAAK,CAAC,gDAAD,CAAL;AACH,WAFD,MAEO;AACHA,YAAAA,KAAK,CAAC,mDAAD,CAAL;AACH;AACJ;AAfE,OAAP;AAiBH;AACJ,GApBD;;AAsBA,sBACI;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA,4BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,eAGI,QAAC,IAAD;AAAM,MAAA,IAAI,EAAE9C,IAAZ;AACM,MAAA,iBAAiB,EAAEW,iBADzB;AAEM,MAAA,OAAO,EAAEuB;AAFf;AAAA;AAAA;AAAA;AAAA,YAHJ,eAOI,QAAC,gBAAD;AAAkB,MAAA,MAAM,EAAE7B;AAA1B;AAAA;AAAA;AAAA;AAAA,YAPJ,eAQI,QAAC,QAAD;AAAU,MAAA,KAAK,EAAEE;AAAjB;AAAA;AAAA;AAAA;AAAA,YARJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAcH;;GAzFQR,G;;KAAAA,G;AA2FT,eAAeA,GAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport $ from 'jquery-ajax';\r\nimport \"./creditcardapp.css\";\r\nimport Form from './components/AddNewCreditCards';\r\nimport CardList from './components/CardList';\r\nimport ValidationErrors from './hooks/ValidationErrors';\r\n\r\nconst urlGetAll = \"http://localhost:8080/creditCard/getAll\";\r\nconst urlAdd = \"http://localhost:8080/creditCard/add\";\r\n\r\n\r\nfunction App() {\r\n    const [card, setCard] = useState({\r\n        name: '', cardNumber: '', limit: 0\r\n    });\r\n    const [validationErrors, setValidationErrors] = useState({\r\n        name: false, cardNumber: false, limit: false\r\n    });\r\n    const [cardList, setCardList] = useState([]);\r\n\r\n    useEffect(() => {\r\n        $.get(urlGetAll, response => setCardList(response));\r\n    }, []);\r\n\r\n\r\n    const handleInputChange = event => {\r\n        let obj = {[event.target.name] : event.target.value};\r\n        setCard(() => ({ ...card, ...obj }));\r\n    }\r\n\r\n    const isFormValid = () => {\r\n        const nameRegex = /^[^0-9.]+$/;\r\n        const limitRegex = /^[0-9]+$/;\r\n        let errors = {name: true, cardNumber: true, limit: true};\r\n        if (nameRegex.test(card.name))\r\n            errors.name = false;\r\n        if (checkCardNumber())\r\n            errors.cardNumber = false;\r\n        if (limitRegex.test(card.limit) && card.limit >= 100)\r\n            errors.limit = false;\r\n        setValidationErrors(errors);\r\n        return !Object.values(errors).some(error => error === true);\r\n    }\r\n\r\n    const checkCardNumber = () => {\r\n        const cardNumber = card.cardNumber.replace(/ /g,'').replace(/-/g,'');\r\n        return cardNumber.length >= 16 && cardNumber.length <= 19\r\n            && checkLuhn10(cardNumber);\r\n    }\r\n\r\n    const checkLuhn10 = cardNumber => {\r\n        let sum = 0;\r\n        for (let i=0; i<cardNumber.length; i++){\r\n            let digit = Number(cardNumber.charAt(i));\r\n            if (i % 2 === 0) {\r\n                digit *= 2;\r\n                if (digit > 9)\r\n                    digit -= 9;\r\n            }\r\n            sum += digit;\r\n        }\r\n        return (sum % 10) === 0;\r\n    }\r\n\r\n    const addCard = () => {\r\n        if (isFormValid()){\r\n            $.ajax({\r\n                url:urlAdd,\r\n                type:\"POST\",\r\n                data:JSON.stringify(card),\r\n                contentType:\"application/json;charset=utf-8\",\r\n                success: function(r){\r\n                    setCardList( [...cardList, card] );\r\n                    setCard({name: '', cardNumber: '', limit: ''});\r\n                },\r\n                error: function(xhr, status, error){\r\n                    if (xhr.status === 409) {\r\n                        alert(\"A Credit Card with that number already exists!\");\r\n                    } else {\r\n                        alert(\"A service error occurred, please try again later!\");\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <h1>Credit Card System</h1>\r\n            <h2> Add </h2>\r\n            <Form card={card}\r\n                  handleInputChange={handleInputChange}\r\n                  addCard={addCard} />\r\n\r\n            <ValidationErrors errors={validationErrors} />\r\n            <CardList cards={cardList} />\r\n\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;"]},"metadata":{},"sourceType":"module"}